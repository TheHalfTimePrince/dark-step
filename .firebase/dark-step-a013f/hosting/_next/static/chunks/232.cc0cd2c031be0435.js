"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{5232:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(7437),l=r(2265),s=r(1962);let a={0:"E4",1:"F#4",2:"G4",3:"A4",4:"B4",5:"C5",6:"D5",7:"E5",8:"F#5",9:"G5",10:"A5",11:"B5",12:"C6",13:"D6",14:"E6",15:"F#6"},c={0:"C1",1:"D1",2:"E1",3:"F1",4:"G1",5:"A1",6:"B1",7:"C2",8:"D2",9:"E2",10:"F2",11:"G2",12:"A2",13:"B2",14:"C3",15:"D3"},i=[[],[],[],[],[],[],[],[]],u={bass:{name:"bass",icon:"\uD83C\uDFB8",noteActions:c,styleWatch:i},chordSynth:{name:"chordSynth",icon:"\uD83C\uDFBC",noteActions:{0:["E3","G3","B3","D4"],1:["F#3","A3","C4","E4"],2:["G3","B3","D4","F#4"],3:["A3","C4","E4","G4"],4:["B3","D4","F#4","A4"],5:["C4","E4","G4","B4"],6:["D4","F#4","A4","C5"],7:["E3","G3","B3","D4","F#4"],8:["F#3","A3","C4","E4","G4"],9:["G3","B3","D4","F#4","A4"],10:["A3","C4","E4","G4","B4"],11:["B3","D4","F#4","A4","C#5"],12:["C4","E4","G4","B4","D5"],13:["D4","F#4","A4","C5","E5"],14:["E4","G4","B4","D4"],15:["F#4","A4","C4","E4"]},styleWatch:i},drums:{name:"drums",icon:"\uD83E\uDD41",noteActions:c,styleWatch:i},polySynth:{name:"polySynth",icon:"\uD83D\uDD14",noteActions:a,styleWatch:i,volume:-16},sampler:{name:"sampler",icon:"\uD83D\uDCFC"},playableLead:{name:"playableLead",icon:"\uD83C\uDFBA",noteActions:a}};var o=r(3416),d=r(6806),f=e=>{let{steps:t,activeStep:r,instruments:s,activeSection:a,setActiveSection:c,visualSection:i,setVisualSection:u,playing:f,currentInstrument:m,sequencerCore:h,setElementsToCore:x,setInstruments:v,sections:w,setSections:p,elementsToCore:g,activeElements:j,setActiveElements:y,updateActiveElements:N}=e,b={0:":0:0",1:":0:1",2:":0:2",3:":0:3",4:":1:0",5:":1:1",6:":1:2",7:":1:3",8:":2:0",9:":2:1",10:":2:2",11:":2:3",12:":3:0",13:":3:1",14:":3:2",15:":3:3"};return(0,l.useEffect)(()=>{15===r&&c(w.indexOf(a)===w.length-1?0:w[w.indexOf(a)+1]);let e=i===a;if(e)for(let e=0;e<16;e++){let n=s[m].styleWatch[i].some(t=>t.index===r&&t.innerIndex===e),l=document.getElementById((r+e*t).toString()+"-burst");if(!l){console.error("element not found");continue}n?(l.classList.remove("fade"),l.classList.remove("burst"),l.classList.remove("rounded-lg"),l.classList.add("rounded-full"),l.offsetWidth,l.classList.add("burst")):(l.classList.remove("fade"),l.classList.remove("rounded-full"),l.classList.add("rounded-lg"),l.offsetWidth,l.classList.add("fade"))}let n=document.getElementById(a.toString()+"-"+Math.floor(r/2).toString()+"-window");null!==n&&(e?(n.classList.remove("window-fade"),n.classList.remove("window-burst"),n.classList.remove("md:rounded-lg"),n.classList.add("md:rounded-full"),n.offsetWidth,n.classList.add("window-burst")):(n.classList.remove("window-fade"),n.classList.remove("window-burst"),n.classList.remove("md:rounded-lg"),n.classList.add("md:rounded-full"),n.offsetWidth,n.classList.add("window-fade")))},[r]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full  flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:" flex px-[1px] md:px-0 w-full max-w-screen items-center justify-center space-x-0 md:space-x-1",children:Array.from({length:t}).map((e,r)=>(0,n.jsx)("div",{className:"w-[6.25%] md:w-8  flex flex-col space-y-0 md:space-y-1",children:Array.from({length:t}).map((e,l)=>(0,n.jsx)("div",{className:"w-full md:w-8 aspect-square text-xs border border-secondary md:border-none rounded-none md:rounded-lg  flex justify-center items-center   cursor-crosshair  relative ".concat(function(e,t){let r=s[m].styleWatch[i].some(r=>r.index===e&&r.innerIndex===t);switch(!0){case r:return"md:scale-[60%] bg-secondary";case!f&&0===e:return"bg-lightShade/80";default:return"bg-secondary/20"}}(r,l)),onClick:()=>{!function(e,t){let r=s[m],n={time:b[e.toString()],note:r.noteActions[t],instrument:r.name},l=j[i].findIndex(e=>e.time===n.time&&e.note===n.note&&e.instrument===n.instrument);if(-1!==l){j[i]=j[i].filter((e,t)=>t!==l),y(j);let r={time:w.indexOf(i).toString()+n.time,note:n.note,instrument:n.instrument},s=g.find(e=>e.time===r.time&&e.note===r.note&&e.instrument===r.instrument);s&&h.current.remove(s),x([...g.filter(e=>e!==s)]),v(r=>{let n=r[m].styleWatch.map((r,n)=>n===i?r.filter(r=>r.index!==e||r.innerIndex!==t):r);return{...r,[m]:{...r[m],styleWatch:n}}})}else{let r=w.indexOf(i),l=[...j[i],n];j[i]=l,y(j);let s={time:r.toString()+n.time,note:n.note,instrument:n.instrument};x([...g,s]),h.current.add(s),v(r=>({...r,[m]:{...r[m],styleWatch:r[m].styleWatch.map((r,n)=>n===i?[...r,{index:e,innerIndex:t}]:r)}}))}}(r,l)},children:(0,n.jsx)("div",{id:(r+l*t).toString()+"-burst",className:"w-full h-full rounded-none md:rounded-lg  absolute top-0 left-0 pointer-events-none"},r+(l*t).toString()+"-burst")},r+l*t))},r))}),(0,n.jsx)("div",{className:"w-full grid grid-cols-8 pt-4 md:px-4",children:Array.from({length:8}).map((e,t)=>(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center px-none md:px-4",children:[(0,n.jsx)("div",{className:" w-full aspect-square grid grid-cols-8 grid-rows-1 cursor-crosshair  rounded-none md:rounded-lg ".concat(i===t?"bg-lightShade/80":w.includes(t)?"bg-secondary":"bg-secondary/20","\n                  ").concat(t>=1&&t<=7?"border-r-[1px] border-y-[1px] border-secondary md:border-none":0===t?"border-[1px] border-secondary md:border-none":""),onClick:()=>{if(i===t&&w.includes(t)){if(0!==i){let e=w.filter(e=>e!==t);p(e),u(w[e.length-1])}}else w.includes(t)?w.includes(t)&&i!==t&&u(t):(p([...w,t].sort((e,t)=>e-t)),u(t))},children:Array.from({length:8}).map((e,r)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{id:t.toString()+"-"+r.toString()+"-window",className:"w-full h-full ".concat(0===r?"md:rounded-r-lg":7===r?"md:rounded-l-lg":"rounded-none md:rounded-none")})}))},t),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-center rounded-none md:rounded-lg  justify-center py-2 px-2",children:[(0,n.jsx)(o.Z,{className:"w-5 text-secondary/20 ".concat(t===i?"hover:text-secondary/20 cursor-not-allowed":"hover:text-quarternary cursor-pointer","  mx-1"),onClick:()=>{i!==t&&i!==t&&(j[i]=j[i].filter(e=>e.instrument!==m),j[i]=j[i].concat(j[t].filter(e=>e.instrument===m)),y(j),N(),v(e=>{let r=[...e[m].styleWatch];return r[i]=[...r[t]],{...e,[m]:{...e[m],styleWatch:r}}}))}}),(0,n.jsx)(d.Z,{className:"w-5 mt-1 md:mt-0 text-secondary/20 hover:text-quarternary cursor-pointer mx-1",onClick:()=>{j[t]=j[t].filter(e=>e.instrument!==m),y(j),N(),v(e=>{let r=[...e[m].styleWatch];return r[t]=[],{...e,[m]:{...e[m],styleWatch:r}}})}})]})]}))})]})})},m=r(5829),h=r(9258),x=r(7868),v=r(3167),w=r(1367);function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.m6)((0,v.W)(t))}let g=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsxs)(x.fC,{ref:t,className:p("relative flex w-full h-full touch-none select-none items-center",r),...l,children:[(0,n.jsx)(x.fQ,{className:"relative h-4 w-4 grow overflow-hidden rounded-full bg-lightShade/30",children:(0,n.jsx)(x.e6,{className:"absolute h-4 bg-lightShade"})}),(0,n.jsx)(x.bU,{className:"block h-8 w-8 rounded-full hover:cursor-pointer  bg-secondary shadow transition-colors focus-visible:outline-none   disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-800 dark:border-neutral-50/50 dark:bg-neutral-950 dark:focus-visible:ring-neutral-300"})]})});g.displayName=x.fC.displayName;var j=r(4845);let y=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)(j.fC,{className:p("peer inline-flex h-8 w-16 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-lightShade data-[state=unchecked]:bg-lightShade/30 dark:focus-visible:ring-neutral-300 dark:focus-visible:ring-offset-neutral-950 dark:data-[state=checked]:bg-neutral-50 dark:data-[state=unchecked]:bg-neutral-800",r),...l,ref:t,children:(0,n.jsx)(j.bU,{className:p("pointer-events-none block h-8 w-8 rounded-full bg-secondary shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-8 data-[state=unchecked]:translate-x-[-2px] dark:bg-neutral-950")})})});y.displayName=j.fC.displayName;var N=r(1288),b=r(4887),S=r(9580),C=e=>{let{isLoading:t}=e;return(0,l.useEffect)(()=>{let e=window.innerWidth-document.documentElement.clientWidth;t?(document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(e,"px")):(document.body.style.overflow="auto",document.body.style.paddingRight="0px")},[t]),(0,n.jsx)(n.Fragment,{children:t&&(0,b.createPortal)((0,n.jsx)(N.Z,{children:(0,n.jsx)("div",{className:"h-screen w-full fixed top-0 left-0 bg-black/60 z-[50]  flex justify-center items-center ".concat(t?"":"hidden"),children:(0,n.jsx)(S.Z,{className:"text-gray-100 animate-spin",size:64})})}),document.body)})},E=r(3832),k=r(2494);let R={0:"E4",1:"F#4",2:"G4",3:"A4",4:"B4",5:"C5",6:"D5",7:"E5",8:"F#5",9:"G5",10:"A5",11:"B5",12:"C6",13:"D6",14:"E6",15:"F#6"},D=(e,t)=>{let r=Math.floor(e/t*Object.keys(R).length);return R[r.toString()]};var A=e=>{let{playableSynthRef:t,lowpassFilter:r,reverbRef:a,delayRef:c,wobbleRef:i}=e,u=(0,l.useRef)(null),o=(0,l.useRef)(null),d=(0,l.useRef)(null),f=(0,l.useRef)(null),[m,h]=(0,l.useState)([]),[x,v]=(0,l.useState)([]);function w(e,t){return(t-e)/t*9730+270}let p=(e,t)=>{let r=Date.now();h(n=>[...n,{id:r,x:e,y:t}]),setTimeout(()=>{h(e=>e.filter(e=>e.id!==r))},1500)},g=(e,t)=>{let r=Date.now();v(n=>[...n,{id:r,x:e,y:t}]),setTimeout(()=>{v(e=>e.filter(e=>e.id!==r))},1500)},j=()=>{t.current.triggerRelease(),d.current&&(clearInterval(d.current),d.current=null)};return(0,n.jsx)("div",{className:"flex w-full justify-center relative space-x-1",children:(0,n.jsxs)("div",{ref:u,className:"w-full mx-2 md:mx-0 md:w-[40rem] aspect-square rounded-lg border border-quarternary bg-secondary/20 cursor-crosshair",onMouseDown:e=>{if(e.preventDefault(),null!==u.current){let t=w(e.nativeEvent.offsetY,u.current.offsetHeight);o.current=D(e.nativeEvent.offsetX,u.current.offsetWidth),r.current.frequency.linearRampToValueAtTime(t,s.zO()+.2)}s.zO()>=0&&t.current.triggerAttack(o.current,s.zO()),f.current=s.zO(),a.current.wet.value=.7,c.current.wet.value=.7,i.current.wet.value=.5,d.current=setInterval(()=>{let e=s.zO()-f.current;a.current.wet.value=Math.min(1,.7+e/40),c.current.wet.value=Math.min(1,.7+e/40),i.current.wet.value=Math.min(1,.5+e/40),i.current.depth=Math.min(1,.5+e/40)},50);let n=u.current.getBoundingClientRect();p(e.clientX-n.left,e.clientY-n.top)},onMouseUp:j,onMouseLeave:j,onMouseMove:e=>{let n=w(e.nativeEvent.offsetY,u.current.offsetHeight);if(r.current.frequency.linearRampToValueAtTime(n,s.zO()+.2),1!==e.buttons)return;let l=D(e.nativeEvent.offsetX,u.current.offsetWidth);o.current!==l&&(o.current=l,s.zO()>=0&&t.current.setNote(o.current));let a=u.current.getBoundingClientRect();g(e.clientX-a.left,e.clientY-a.top)},onTouchStart:e=>{e.preventDefault();let n=e.touches[0];if(null!==u.current){let e=w(n.clientY-u.current.getBoundingClientRect().top,u.current.offsetHeight);o.current=D(n.clientX-u.current.getBoundingClientRect().left,u.current.offsetWidth),r.current.frequency.linearRampToValueAtTime(e,s.zO()+.2)}s.zO()>=0&&t.current.triggerAttack(o.current,s.zO()),f.current=s.zO(),a.current.wet.value=.7,c.current.wet.value=.7,i.current.wet.value=.5,d.current=setInterval(()=>{let e=s.zO()-f.current;a.current.wet.value=Math.min(1,.7+e/40),c.current.wet.value=Math.min(1,.7+e/40),i.current.wet.value=Math.min(1,.5+e/40),i.current.depth=Math.min(1,.5+e/40)},50);let l=u.current.getBoundingClientRect();p(n.clientX-l.left,n.clientY-l.top)},onTouchEnd:()=>{t.current.triggerRelease(),d.current&&(clearInterval(d.current),d.current=null)},onTouchMove:e=>{e.preventDefault();let n=e.touches[0],l=w(n.clientY-u.current.getBoundingClientRect().top,u.current.offsetHeight);r.current.frequency.linearRampToValueAtTime(l,s.zO()+.2);let a=D(n.clientX-u.current.getBoundingClientRect().left,u.current.offsetWidth);o.current!==a&&(o.current=a,s.zO()>=0&&t.current.setNote(o.current));let c=u.current.getBoundingClientRect();g(n.clientX-c.left,n.clientY-c.top)},children:[m.map(e=>{let{id:t,x:r,y:l}=e;return(0,n.jsx)("div",{className:"fade bg-quarternary w-8 h-8 rounded-full absolute ",style:{left:r-15,top:l-14}},t)}),x.map(e=>{let{id:t,x:r,y:l}=e;return(0,n.jsx)("div",{className:"burst bg-quarternary w-2 h-2 rounded-full absolute ",style:{left:r,top:l}},t)})]})})};let F=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsxs)(x.fC,{ref:t,className:p("relative flex flex-col h-full touch-none select-none items-center",r),...l,children:[(0,n.jsx)(x.fQ,{className:"relative h-full w-4 grow overflow-hidden rounded-full bg-lightShade/30",children:(0,n.jsx)(x.e6,{className:"absolute h-full w-4 bg-lightShade"})}),(0,n.jsx)(x.bU,{className:"block h-8 w-8 rounded-full hover:cursor-pointer  bg-secondary shadow transition-colors focus-visible:outline-none   disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-800 dark:border-neutral-50/50 dark:bg-neutral-950 dark:focus-visible:ring-neutral-300"})]})});F.displayName=x.fC.displayName;var B=e=>{let{instruments:t,masterVolumeUi:r,setMasterVolumeUi:l,bassMasterVolumeUi:s,setBassMasterVolumeUi:a,drumMasterVolumeUi:c,setDrumMasterVolumeUi:i,polySynthMasterVolumeUi:u,setPolySynthMasterVolumeUi:o,chordMasterVolumeUi:d,setChordSynthMasterVolumeUi:f,granularSynthMasterVolumeUi:m,setGranularSynthMasterVolumeUi:h,playableLeadMasterVolumeUi:x,setPlayableLeadMasterVolumeUi:v}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col min-w-full md:min-w-0",children:[(0,n.jsxs)("div",{className:"flex  justify-center",children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.bass.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[s],onValueChange:e=>{a(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"w-full text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.chordSynth.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[d],onValueChange:e=>{f(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"w-full text-3xl flex overflow-auto justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.drums.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[c],onValueChange:e=>{i(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"w-full text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.polySynth.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[u],onValueChange:e=>{o(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"w-full text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.sampler.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[m],onValueChange:e=>{h(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"w-full text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"py-4 flex flex-col relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:t.playableLead.icon}),(0,n.jsx)(F,{min:-60,step:1,max:16,value:[x],onValueChange:e=>{v(e[0])},className:"h-64 z-[10]",orientation:"vertical"})]})})})]}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-full flex-col text-3xl flex justify-center items-center",children:(0,n.jsxs)("div",{className:"pt-4 flex items-center justify-center w-full relative",children:[(0,n.jsx)("div",{className:"p-2 flex items-center  justify-center",children:"\uD83D\uDD0A"}),(0,n.jsx)(g,{min:-60,step:1,max:16,value:[r],onValueChange:e=>{l(e[0])},className:"w-full h-4 z-[10]"})]})})})]})})},L=r(1768),M=r(3081),z=r(2235),V=r(8798),W=e=>{let{visualizationText:t,setGrainSize:r,setOverlapState:s,setPlaybackRateState:a,setRandomState:c,setDriftState:i,setDetuneState:u,toggleGrain:o,removeGrain:d,reverseGrain:f,setReverseGrain:m}=e;return(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col w-[90%] md:w-full h-[90%] aspect-square md:max-w-[38rem]  p-4 rounded-lg bg-secondary/20 ",children:[(0,n.jsx)("div",{className:"flex flex-wrap w-full h-1/2 rounded-t-lg border border-quarternary bg-lightShade/20 text-wrap overflow-hidden",children:t.map((e,t)=>(0,n.jsx)(l.Fragment,{children:e},t))}),(0,n.jsxs)("div",{className:"flex flex-wrap h-1/2 w-full",children:[(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:" w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>r(10*t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>s(t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>a(10*t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>c(t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>i(t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"w-8 md:w-16 cursor-pointer",children:(0,n.jsx)(L.Z,{diameter:"100%",color:"#F6F1D1",pointerColor:"#EABE6C",action:(e,t)=>u(100*t)})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"cursor-pointer",onClick:o,children:(0,n.jsx)(M.Z,{className:"text-lightShade w-16"})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"cursor-pointer",onClick:d,children:(0,n.jsx)(z.Z,{className:"text-lightShade w-16"})})}),(0,n.jsx)("div",{className:"p-3",children:(0,n.jsx)("div",{className:"cursor-pointer",onClick:()=>{m(!f)},children:(0,n.jsx)(V.Z,{className:"text-lightShade w-16"})})})]})]})})},q=e=>{let{polySynthOscillatorType:t,setPolySynthOscillatorType:r,polySynthADSR:l,setPolySynthADSR:s}=e,a={sine:"sine-1",square:"square-1",triangle:"triangle-1",sawtooth:"saw-1",fmsine:"sine-2",fmsquare:"square-2",fmtriangle:"triangle-2",fmsawtooth:"saw-1",amsine:"sine-1",amtriangle:"triangle-3",amsawtooth:"saw-1",fatsquare:"square-1",fattriangle:"sine-2",fatsawtooth:"saw-1",pulse:"pulse-1",pwm:"square-1"};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col max-w-[32rem]",children:[(0,n.jsx)("div",{className:"flex flex-wrap ",children:["sine","square","triangle","sawtooth","fmsine","fmsquare","fmtriangle","fmsawtooth","amsine","amtriangle","amsawtooth","fatsquare","fattriangle","fatsawtooth","pulse","pwm"].map(e=>(0,n.jsx)("div",{className:"flex flex-col items-center hover:cursor-pointer  p-2",onClick:()=>r(e),children:(0,n.jsx)("div",{className:"w-16 h-16 flex justify-center items-center  rounded-lg border-2  ".concat(t===e?"border-quarternary":"border-secondary"),children:(0,n.jsx)("img",{src:"/".concat(a[e],".png"),className:"w-12 h-12"})})}))}),(0,n.jsxs)("div",{className:"w-full grid grid-cols-2 gap-4 grid-rows-2 py-4 ",children:[(0,n.jsx)("div",{className:"w-full flex flex-col items-center min-h-12 ",children:(0,n.jsx)(g,{min:0,step:1,max:1e3,className:"w-full",value:[1e3*l[0]],onValueChange:e=>{s([e[0]/1e3,l[1],l[2],l[3]])}})}),(0,n.jsx)("div",{className:"w-full flex flex-col items-center min-h-12",children:(0,n.jsx)(g,{min:0,step:1,max:1e3,className:"w-full",value:[1e3*l[1]],onValueChange:e=>{s([l[0],e[0]/1e3,l[2],l[3]])}})}),(0,n.jsx)("div",{className:"w-full flex flex-col items-center min-h-12",children:(0,n.jsx)(g,{min:0,step:1,max:1e3,className:"w-full",value:[1e3*l[2]],onValueChange:e=>{s([l[0],l[1],e[0]/1e3,l[3]])}})}),(0,n.jsx)("div",{className:"w-full flex flex-col items-center min-h-12",children:(0,n.jsx)(g,{min:0,step:1,max:1e4,value:[1e3*l[3]],className:"w-full",onValueChange:e=>{s([l[0],l[1],l[2],e[0]/1e3])}})})]})]})})},G=e=>{let{samplerSample:t,setSamplerSample:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col  items-center justify-center",children:[(0,n.jsx)("label",{htmlFor:"fileUpload",className:"bg-secondary/20 hover:cursor-pointer text-center p-20 text-9xl w-fit rounded-lg custom-file-upload",children:"\uD83D\uDCBE"}),(0,n.jsx)("input",{id:"fileUpload",type:"file",disabled:null!==t,className:"hidden",onChange:e=>{if(null!==e.target.files){let t=e.target.files[0];if(!t){alert("No file selected.");return}if("audio/wav"!==t.type){alert("File must be a .wav audio.");return}if(t.size>10097152){alert("File must be less than 10MB.");return}r(t)}},accept:"audio/wav"})]})})},O=e=>{let{children:t,className:r,isOpen:s,onExit:a}=e;return(0,l.useEffect)(()=>{let e=window.innerWidth-document.documentElement.clientWidth;s?(document.body.style.overflow="hidden",document.body.style.paddingRight="".concat(e,"px")):document.body.style.overflow="auto"},[s]),(0,n.jsx)(n.Fragment,{children:s&&(0,b.createPortal)((0,n.jsx)(N.Z,{children:(0,n.jsx)("div",{className:"h-screen w-full fixed top-0 left-0 z-[50]  flex justify-center items-center ".concat(s?"":"hidden"),children:(0,n.jsx)("div",{className:"z-50 bg-white/40 h-full w-full relative flex justify-center items-center ".concat(r),onClick:a,children:(0,n.jsx)("div",{className:"pointer-events-none",children:t})})})}),document.body)})};let U=r(3833);var T=()=>{let[e,t]=(0,l.useState)([[],[],[],[],[],[],[],[]]),[r,a]=(0,l.useState)([]),[c,i]=(0,l.useState)(u),[o,d]=(0,l.useState)(!1),[x,v]=(0,l.useState)(null),[w,p]=(0,l.useState)(0),[j,N]=(0,l.useState)(120),[b,S]=(0,l.useState)(0),[R,D]=(0,l.useState)(0),[F,L]=(0,l.useState)([0]),[M,z]=(0,l.useState)(!1),V=(0,l.useRef)(null),[T,Z]=(0,l.useState)(!1),I=(0,l.useRef)(new s.ff(0)),[H,J]=(0,l.useState)(0);(0,l.useRef)();let P=(0,l.useRef)(new s.ff(0)),[X,Y]=(0,l.useState)(0),K=(0,l.useRef)(new s.ff(0)),[_,Q]=(0,l.useState)(0),$=(0,l.useRef)(new s.ff(0)),[ee,et]=(0,l.useState)(0),er=(0,l.useRef)(new s.ff(0)),[en,el]=(0,l.useState)(0),es=(0,l.useRef)(new s.ff(0)),[ea,ec]=(0,l.useState)(0),ei=(0,l.useRef)(new s.ff(0)),[eu,eo]=(0,l.useState)(0),[ed,ef]=(0,l.useState)(!0),[em,eh]=(0,l.useState)(!0),[ex,ev]=(0,l.useState)(!0),[ew,ep]=(0,l.useState)(!0);(0,l.useEffect)(()=>{em||ex||ew||(Z(!0),ef(!1))},[em,ex,ew]);let eg=(0,l.useRef)(null);(0,l.useEffect)(()=>(eg.current=new s.Z4({urls:{C1:"E2.wav",D1:"F2.wav",E1:"G2.wav",F1:"A3.wav",G1:"B3.wav",A1:"C3.wav",B1:"D3.wav",C2:"E3.wav",D2:"E2-Long.wav",E2:"F2-Long.wav",F2:"G2-Long.wav",G2:"A3-Long.wav",A2:"B3-Long.wav",B2:"C3-Long.wav",C3:"D3-Long.wav",D3:"E3-Long.wav"},baseUrl:"/audio/bass/",onload:()=>{ep(!1)}}),eg.current.chain(P.current,I.current,s.o6),()=>{eg.current&&eg.current.dispose()}),[]);let[ej,ey]=(0,l.useState)("drums"),[eN,eb]=(0,l.useState)("808"),eS=(0,l.useRef)(null);(0,l.useEffect)(()=>(eS.current=new s.Z4({urls:{C1:"Kick Short.wav",D1:"Snare Bright.wav",E1:"Clap.wav",F1:"Snare Low.wav",G1:"Hihat.wav",A1:"Open Hat Short.wav",B1:"Open Hat Long.wav",C2:"Rimshot.wav",D2:"Maracas.wav",E2:"Cowbell.wav",F2:"Cymbal.wav",G2:"Claves.wav",A2:"Conga High.wav",B2:"Conga Mid.wav",C3:"Conga Low.wav",D3:"Tom Mid.wav"},baseUrl:"/audio/808-drums/",onload:()=>{eh(!1)}}),eS.current.chain(I.current,K.current,s.o6),()=>{eS.current&&eS.current.dispose()}),[]);let eC=(0,l.useRef)(null);(0,l.useEffect)(()=>(eC.current=new s.Z4({urls:{C1:"Kick 1.wav",D1:"Kick 2.wav",E1:"Snare 1.wav",F1:"Snare 2.wav",G1:"Snare 3.wav",A1:"Snare 4.wav",B1:"Hi Hat 1.wav",C2:"Hi Hat 2.wav",D2:"Open Hi Hat 1.wav",E2:"Open Hi Hat 2.wav",F2:"Clap 1.wav",G2:"Crash 1.wav",A2:"Tamb 1.wav",B2:"Bongo 1.wav",C3:"Crash 2.wav",D3:"Tom 1.wav"},baseUrl:"/audio/live-drums/",onload:()=>{ev(!1)}}),eC.current.chain(I.current,K.current,s.o6),()=>{eC.current&&eC.current.dispose()}),[]);let eE=(0,l.useRef)(null),ek=(0,l.useRef)(null),eR=(0,l.useRef)(null),eD=(0,l.useRef)(null),eA=(0,l.useRef)(null),eF=(0,l.useRef)(null),eB=()=>{eE.current=new s.wn({type:"lowpass",frequency:1500}),eR.current=new s.op({oscillator:{type:"sawtooth"},envelope:{attack:0,decay:.1,sustain:.9,release:1.2},portamento:.1,volume:0}),eD.current=new s.E8({decay:4,wet:.7}),eF.current=new s.wm({delayTime:"4n",feedback:.3,wet:.3}),ek.current=new s.ff(0),eA.current=new s.bK(4,2.5,.5).start(),eR.current.chain(eA.current,eF.current,eD.current,eE.current,ek.current,ei.current,I.current,s.o6)},[eL,eM]=(0,l.useState)(!1),ez=(0,l.useRef)(null),eV=(0,l.useRef)(null),eW=(0,l.useRef)(null),eq=(0,l.useRef)(c.polySynth.volume),eG=(0,l.useRef)(null),eO=(0,l.useRef)(null),[eU,eT]=(0,l.useState)("sine"),[eZ,eI]=(0,l.useState)([.005,.1,.9,1.2]),eH=()=>{eq.current=new s.ff,eW.current=new s.D0("4n",.5),eW.current.wet.value=.7,eq.current.volume.value=-18,eV.current=new s.SA({roomSize:.97,wet:.8}),eG.current={oscillator:{type:eU,phase:0,detune:0},envelope:{attack:eZ[0],decay:eZ[1],sustain:eZ[2],release:eZ[3]},volume:-18,portamento:.05},ez.current=new s.v2(s.WV,eG.current),eO.current=new s.qk("waveform",1024),I.current.connect(eO.current),ez.current.chain(eW.current,eV.current,eq.current,$.current,I.current,s.o6)},eJ=(0,l.useRef)(null),eP=(0,l.useRef)(null),eX=()=>{eP.current=new s.ff,eP.current.volume.value=-8,eJ.current=new s.v2(s.WV,{oscillator:{type:"triangle"},envelope:{attack:1,decay:1,sustain:1,release:2},volume:0}),eJ.current.chain(eP.current,er.current,I.current,s.o6)},eY=(0,l.useRef)(null),eK=()=>{eY.current=new s.Lz((e,t)=>{switch(t.instrument){case"polySynth":ez.current.triggerAttackRelease(t.note,"8n",e);break;case"chordSynth":eJ.current.triggerAttackRelease(t.note,"8n",e);break;case"bass":eg.current.triggerAttackRelease(t.note,"8n",e);break;case"drums":switch(eN){case"808":eS.current.triggerAttackRelease(t.note,"8n",e);break;case"Live":eC.current.triggerAttackRelease(t.note,"8n",e);break;default:console.log(eN,"Drum kit not found")}break;default:console.error("Instrument not found")}},[]),eY.current.loop=!0,F.length>1&&(eY.current.loopEnd=F.length.toString()+"m"),r.length>0&&r.forEach(e=>{eY.current.add(e)})};(0,l.useEffect)(()=>(o&&e_(),U(new AudioContext,V.current).then(function(){}),eB(),eH(),eX(),s.J7.bpm.value=j,s.J7.timeSignature=4,s.J7.scheduleRepeat(e=>{0===s.J7.seconds?p(0):p(e=>(e+1)%16)},"16n"),eK(),()=>{s.J7.stop(),s.J7.cancel()}),[eN]),(0,l.useEffect)(()=>{ez.current&&ez.current.set({oscillator:{type:eU}})},[eU]),(0,l.useEffect)(()=>{ez.current&&ez.current.set({envelope:{attack:eZ[0],decay:eZ[1],sustain:eZ[2],release:eZ[3]}})},[eZ]);let e_=()=>{d(!o),o?(s.J7.stop(),p(0),S(0)):(s.J7.start(),eY.current.start(0))};(0,l.useEffect)(()=>{s.J7.bpm.value=j},[j]);let[eQ,e$]=(0,l.useState)(!1),e0=()=>{a([]),eY.current.loopEnd=F.length.toString()+"m",eY.current.clear();let t=[];F.forEach(r=>{e[r].length>0&&e[r].forEach(e=>{let n={...e,time:F.indexOf(r).toString()+e.time};console.log("elementToPush",n),t.push(n),eY.current.add(n)})}),a(t),eY.current.stop(0),s.J7.stop(),p(0),S(0),s.J7.start(),eY.current.start(0)};(0,l.useEffect)(()=>{eQ?e0():e$(!0)},[F]);let[e1,e2]=(0,l.useState)([]),e4=(0,l.useRef)(null),e3=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(null!==x){ef(!0);let e=URL.createObjectURL(x);return e4.current=new s.pw({url:e,grainSize:.2,overlap:.1,playbackRate:1,reverse:!0,detune:0,random:0,drift:0,onload:()=>{console.log("Sample loaded")}}),ef(!1),e3.current=new s.qk("waveform",64),e4.current.chain(e3.current,es.current,I.current,s.o6),e4.current.loop=!0,e4.current.start(),e7(!0),()=>{URL.revokeObjectURL(e),e7(!1),e4.current&&(e4.current.stop(),e4.current.dispose())}}},[x]);let[e6,e8]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(e4.current&&"grainSize"in e4.current){let e=Math.max(Math.floor(e6),1);isNaN(e)?console.error("grainSize is NaN after Math.floor:",e6):e4.current.grainSize=e}},[e6]);let[e5,e7]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e;return e5?e=setInterval(()=>{e2(function(e,t){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=[];for(let e=0;e<1e3;e++){let t="";for(let e=0;e<1;e++)t+=r.charAt(Math.floor(Math.random()*r.length));let s="#".concat(Math.floor(16777215*Math.random()).toString(16)),a=(0,n.jsx)("span",{style:{color:s},children:t},e);l.push(a)}return l}(0,0))},24):!e5&&e&&clearInterval(e),()=>clearInterval(e)},[e5]);let[e9,te]=(0,l.useState)(.1);(0,l.useEffect)(()=>{e4.current&&"overlap"in e4.current&&(e4.current.overlap=e9)},[e9]);let[tt,tr]=(0,l.useState)(1);(0,l.useEffect)(()=>{e4.current&&"playbackRate"in e4.current&&(e4.current.playbackRate=Math.max(tt,.001))},[tt]);let[tn,tl]=(0,l.useState)(0);(0,l.useEffect)(()=>{e4.current&&"random"in e4.current&&(e4.current.random=tn)},[tn]);let[ts,ta]=(0,l.useState)(0);(0,l.useEffect)(()=>{e4.current&&"drift"in e4.current&&(e4.current.random=ts)},[ts]);let[tc,ti]=(0,l.useState)(0);(0,l.useEffect)(()=>{e4.current&&"detune"in e4.current&&(e4.current.random=Math.floor(tc))},[tc]);let[tu,to]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{e4.current&&"reverse"in e4.current&&(e4.current.reverse=tu)},[tu]),(0,l.useEffect)(()=>{I.current&&(I.current.volume.value=H)},[H]),(0,l.useEffect)(()=>{I.current&&(P.current.volume.value=X)},[X]),(0,l.useEffect)(()=>{I.current&&(K.current.volume.value=_)},[_]),(0,l.useEffect)(()=>{I.current&&($.current.volume.value=ee)},[ee]),(0,l.useEffect)(()=>{I.current&&(er.current.volume.value=en)},[en]),(0,l.useEffect)(()=>{I.current&&(es.current.volume.value=ea)},[ea]),(0,l.useEffect)(()=>{I.current&&(ei.current.volume.value=eu)},[eu]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full md:min-h-[953px] h-screen flex flex-col justify-center items-center bgGradient",children:[(0,n.jsxs)("div",{className:"flex flex-col text-tertiary  items-center max-w-full   z-[2]",children:[(0,n.jsxs)("div",{className:"flex flex-col w-full justify-center items-center pb-4",children:[(0,n.jsxs)("h1",{className:"text-2xl md:text-4xl text-white/60 pb-4",children:[(0,n.jsx)("span",{className:"text-white/20",children:"D"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/40",children:"A"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/60",children:"R"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-secondary",children:"K"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/80",children:"S"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/60",children:"T"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/40",children:"E"}),"\xa0\xa0"," ",(0,n.jsx)("span",{className:"text-white/20",children:"P"}),"\xa0\xa0"]}),!1===M&&(0,n.jsxs)("div",{className:"flex max-w-full md:space-x-4 justify-between",children:[(0,n.jsxs)("div",{className:"flex-col items-center justify-center p-2 hover:cursor-pointer",onClick:e_,children:[o&&(0,n.jsx)(E.Z,{size:40,strokeWidth:1,className:"text-quarternary  "}),!o&&(0,n.jsx)(k.Z,{size:40,strokeWidth:1,className:"text-lightShade "})]}),Object.entries(c).map(e=>{let[t,r]=e;return(0,n.jsx)("div",{className:"flex text-3xl flex-col p-2 items-center border-2 rounded-lg hover:cursor-pointer ".concat(ej===t?"border-secondary":"border-transparent"),onClick:()=>{ey(t)},children:(0,n.jsx)("div",{children:r.icon})})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full items-center justify-center",children:[(0,n.jsx)("div",{className:"w-full hidden lg:flex justify-end "}),(0,n.jsxs)("div",{className:"w-full flex flex-col justify-end",children:[("drums"===ej||"polySynth"===ej&&!1===eL||"chordSynth"===ej||"piano"===ej||"bass"===ej)&&!1===M&&(0,n.jsx)(f,{steps:16,activeStep:w,instruments:c,activeSection:b,setActiveSection:S,visualSection:R,setVisualSection:D,playing:o,currentInstrument:ej,sequencerCore:eY,setElementsToCore:a,setInstruments:i,sections:F,setSections:L,elementsToCore:r,activeElements:e,setActiveElements:t,updateActiveElements:e0}),!0===M&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(B,{instruments:c,masterVolumeUi:H,setMasterVolumeUi:J,bassMasterVolumeUi:X,setBassMasterVolumeUi:Y,drumMasterVolumeUi:_,setDrumMasterVolumeUi:Q,polySynthMasterVolumeUi:ee,setPolySynthMasterVolumeUi:et,chordMasterVolumeUi:en,setChordSynthMasterVolumeUi:el,granularSynthMasterVolumeUi:ea,setGranularSynthMasterVolumeUi:ec,playableLeadMasterVolumeUi:eu,setPlayableLeadMasterVolumeUi:eo})}),"polySynth"===c[ej].name&&!0===eL&&!1===M&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q,{polySynthOscillatorType:eU,setPolySynthOscillatorType:eT,polySynthADSR:eZ,setPolySynthADSR:eI})}),"playableLead"===ej&&!1===M&&(0,n.jsx)(A,{playableSynthRef:eR,reverbRef:eD,lowpassFilter:eE,wobbleRef:eA,delayRef:eF}),"sampler"===ej&&null===x&&!1===M&&(0,n.jsx)(G,{samplerSample:x,setSamplerSample:v}),"sampler"===ej&&null!==x&&!1===M&&(0,n.jsx)(W,{visualizationText:e1,setGrainSize:e8,setOverlapState:te,setPlaybackRateState:tr,setRandomState:tl,setDriftState:ta,setDetuneState:ti,toggleGrain:()=>{if(!1===e5){e4.current.start();return}!0===e5&&e4.current.stop()},removeGrain:()=>{null!==x&&(v(null),e7(!1))},reverseGrain:tu,setReverseGrain:to}),(0,n.jsx)("div",{className:"w-full flex justify-center ",children:(0,n.jsxs)("div",{className:"flex w-full md:w-auto justify-center space-x-4 md:bg-black rounded-none md:rounded-xl mt-2 p-2 md:p-4",children:[(0,n.jsx)("div",{className:"h-full  flex flex-col justify-center items-center",children:(0,n.jsx)("div",{className:"p-2  cursor-pointer",onClick:()=>{z(!M)},children:(0,n.jsx)(m.Z,{size:42,className:"text-secondary"})})}),(0,n.jsx)(g,{min:20,step:1,max:180,value:[j],className:"w-full md:w-64 py-4 SliderPrimitive:bg-red-400",onValueChange:e=>{N(e[0])}}),"drums"===ej&&(0,n.jsx)("div",{className:"h-full flex flex-col justify-center items-center",children:(0,n.jsx)(y,{checked:"Live"===eN,onCheckedChange:"808"===eN?()=>eb("Live"):()=>eb("808")})}),"polySynth"===ej&&(0,n.jsx)("div",{className:"h-full flex flex-col justify-center items-center",children:(0,n.jsx)("div",{className:"p-2  cursor-pointer",onClick:()=>{eM(!eL)},children:(0,n.jsx)(h.Z,{size:42,className:"text-secondary"})})})]})})]}),"drums"===c[ej].name&&(0,n.jsx)(n.Fragment,{})]})]}),(0,n.jsx)(O,{isOpen:T,onExit:()=>{eb("Live"),Z(!1)},children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex-col items-center justify-center p-2 hover:cursor-pointer",onClick:e_,children:[o&&(0,n.jsx)(E.Z,{size:40,strokeWidth:1,className:"text-quarternary  "}),!o&&(0,n.jsx)(k.Z,{size:40,strokeWidth:1,className:"text-lightShade "})]})})}),(0,n.jsx)(C,{isLoading:ed})]})})}}}]);